newdata <- newdata %>%
# remove undecided voters
filter(rci != 0) %>%
}
get_model_data <- function(
party,
model = c("vote_solidity", "potential_for_growth", "vote_intention"),
data,
rci_prefix = "irc_",
attitudegap_prefix = "attitudegap",
saliency_prefix = "adj_saliency",
ses_and_vis_to_include){
ses_and_vis_to_include <- rlang::enquos(ses_and_vis_to_include)
### stop if model not in vote sol etc. with clear message.
if (model %in% c("vote_solidity", "vote_intention")){
newdata <- data %>%
tidyr::pivot_longer(., cols = starts_with(rci_prefix),
names_to = "party",
names_prefix = rci_prefix,
values_to = "rci") %>%
group_by(id, source_id) %>%
filter(rci == max(rci))
} else if (model == "potential_for_growth") {
newdata <- data %>%
tidyr::pivot_longer(., cols = starts_with(rci_prefix),
names_to = "party",
names_prefix = rci_prefix,
values_to = "rci") %>%
group_by(id, source_id) %>%
filter(rci != max(rci) | rci == 0)
}
if (model == "vote_intention"){
newdata <- newdata %>%
# remove undecided voters
filter(rci != 0) %>%
}
get_model_data <- function(
party,
model = c("vote_solidity", "potential_for_growth", "vote_intention"),
data,
rci_prefix = "irc_",
attitudegap_prefix = "attitudegap",
saliency_prefix = "adj_saliency",
ses_and_vis_to_include){
ses_and_vis_to_include <- rlang::enquos(ses_and_vis_to_include)
### stop if model not in vote sol etc. with clear message.
if (model %in% c("vote_solidity", "vote_intention")){
newdata <- data %>%
tidyr::pivot_longer(., cols = starts_with(rci_prefix),
names_to = "party",
names_prefix = rci_prefix,
values_to = "rci") %>%
group_by(id, source_id) %>%
filter(rci == max(rci))
} else if (model == "potential_for_growth") {
newdata <- data %>%
tidyr::pivot_longer(., cols = starts_with(rci_prefix),
names_to = "party",
names_prefix = rci_prefix,
values_to = "rci") %>%
group_by(id, source_id) %>%
filter(rci != max(rci) | rci == 0)
}
if (model == "vote_intention"){
newdata <- newdata %>%
# remove undecided voters
filter(rci != 0)
}
subset_data <- newdata %>%
ungroup() %>%
## filter for party
filter(party == !!party) %>%
dplyr::select(rci, starts_with(paste0(attitudegap_prefix, "_", party)),
starts_with(saliency_prefix), !!!ses_and_vis_to_include)
names(subset_data) <- gsub(paste0("_", party), "", names(subset_data))
return(subset_data)
}
caq_solid <- get_model_data(party = "CAQ", model = "vote_solidity",
data = Data,
ses_and_vis_to_include = c("granular", "age_cat", "educ", "income", "male", "lang",
"religion", "religiosity", starts_with("reception")))
View(caq_solid)
caq_potgrowth <- get_model_data(party = "CAQ", model = "potential_for_growth",
data = Data,
ses_and_vis_to_include = c("granular", "age_cat", "educ", "income", "male", "lang",
"religion", "religiosity", starts_with("reception")))
View(caq_potgrowth)
voteint_variable = "voteInt"
subset_data <- data %>%
dplyr::select(voteint_variable, starts_with(attitudegap_prefix),
starts_with(saliency_prefix),
!!!ses_and_vis_to_include)
get_voteint_model_data <- function(
data,
voteint_variable = "voteInt",
attitudegap_prefix = "attitudegap",
saliency_prefix = "adj_saliency",
ses_and_vis_to_include
){
ses_and_vis_to_include <- rlang::enquos(ses_and_vis_to_include)
subset_data <- data %>%
dplyr::select(voteint_variable, starts_with(attitudegap_prefix),
starts_with(saliency_prefix),
!!!ses_and_vis_to_include)
return(subset_data)
}
voteint <- get_voteint_model_data(data = Data)
get_voteint_model_data <- function(
data,
voteint_variable = "voteInt",
attitudegap_prefix = "attitudegap",
saliency_prefix = "adj_saliency",
ses_and_vis_to_include
){
ses_and_vis_to_include <- rlang::enquos(ses_and_vis_to_include)
subset_data <- data %>%
dplyr::select(all_of(voteint_variable), starts_with(attitudegap_prefix),
starts_with(saliency_prefix),
!!!ses_and_vis_to_include)
return(subset_data)
}
voteint <- get_voteint_model_data(data = Data)
View(voteint)
voteint <- get_voteint_model_data(data = Data,
ses_and_vis_to_include = c("granular", "age_cat", "educ", "income", "male", "lang",
"religion", "religiosity", starts_with("reception")))
View(voteint)
devtools::install_github("hubcad25/potgrowth")
# Packages ----------------------------------------------------------------
library(dplyr)
# Data --------------------------------------------------------------------
Data <- readRDS("_SharedFolder_memoire-pot-growth/data/warehouse/survey_data/with_adj_saliency.rds")
caq_solid <- potgrowth::get_model_data(party = "CAQ", model = "vote_solidity",
data = Data,
ses_and_vis_to_include = c("granular", "age_cat", "educ", "income", "male", "lang",
"religion", "religiosity", starts_with("reception")))
# Data --------------------------------------------------------------------
Data <- readRDS("_SharedFolder_memoire-pot-growth/data/warehouse/survey_data/with_adj_saliency.rds")
caq_solid <- potgrowth::get_model_data(party = "CAQ", model = "vote_solidity",
data = Data,
ses_and_vis_to_include = c("granular", "age_cat", "educ", "income", "male", "lang",
"religion", "religiosity", starts_with("reception")))
caq_potgrowth <- potgrowth::get_model_data(party = "CAQ", model = "potential_for_growth",
data = Data,
ses_and_vis_to_include = c("granular", "age_cat", "educ", "income", "male", "lang",
"religion", "religiosity", starts_with("reception")))
View(caq_solid)
View(caq_solid)
View(caq_potgrowth)
# Packages ----------------------------------------------------------------
library(dplyr)
# Data --------------------------------------------------------------------
data <- potgrowth::aggregate_party_positions("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/",
colnames = potgrowth::qc_parties)
template <- readODS::read_ods("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/template.ods")
View(data)
vars <- "iss_enviro_envGvtMore"
for (i in vars) {
data$position[data$VARIABLE == i] <- 1 - data$position[data$VARIABLE == i]
}
View(data)
vars_to_reverse <- c("iss_laic_secularismEncouraged",
"iss_laic_relSignsWorkNo",
"iss_laic_relSignsTeachersNo",
"iss_immig_immNoBenefit",
"iss_immig_immLess",
"iss_newleft_wokeObjReal",
"iss_newleft_wokeArtists")
# Data --------------------------------------------------------------------
data <- potgrowth::aggregate_party_positions("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/",
colnames = potgrowth::qc_parties)
template <- readODS::read_ods("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/template.ods")
vars_to_reverse <- c("iss_laic_secularismEncouraged",
"iss_laic_relSignsWorkNo",
"iss_laic_relSignsTeachersNo",
"iss_immig_immNoBenefit",
"iss_immig_immLess",
"iss_newleft_wokeObjReal",
"iss_newleft_wokeArtists")
for (i in vars_to_reverse) {
data$position[data$VARIABLE == i] <- 1 - data$position[data$VARIABLE == i]
}
data <- potgrowth::aggregate_party_positions("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/",
colnames = potgrowth::qc_parties)
template <- readODS::read_ods("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/template.ods")
### invert some scales for interpretability
vars_to_reverse <- c("iss_laic_secularismEncouraged",
"iss_laic_relSignsWorkNo",
"iss_laic_relSignsTeachersNo",
"iss_immig_immNoBenefit",
"iss_immig_immLess",
"iss_newleft_wokeObjReal",
"iss_newleft_wokeArtists")
for (i in vars_to_reverse) {
data$position[data$VARIABLE == i] <- 1 - data$position[data$VARIABLE == i]
label0 <- template$`LABEL 0`[template$VARIABLE == i]
label1 <- template$`LABEL 1`[template$VARIABLE == i]
template$`LABEL 0`[template$VARIABLE == i] <- label1
template$`LABEL 1`[template$VARIABLE == i] <- label0
}
View(template)
data_graph <- left_join(data, template, by = "VARIABLE")
View(data_graph)
ggplot(data_graph, aes(x = position, y = `QUESTION LABEL`))
# Packages ----------------------------------------------------------------
library(dplyr)
library(ggplot2)
ggplot(data_graph, aes(x = position, y = `QUESTION LABEL`))
#### ajouter des linebreaks
add_linebreaks <- function(text) {
# Remplacer chaque groupe de 5 mots par le groupe suivi d'un saut de ligne
gsub("((\\w+\\s){4}\\w+)\\s", "\\1\n", text)
}
# Exemple d'utilisation
text_with_linebreaks <- add_linebreaks(c("allo", "allo allo allo allo allo"))
# Exemple d'utilisation
add_linebreaks(c("allo", "allo allo allo allo allo"))
template$`QUESTION LABEL`
data <- potgrowth::aggregate_party_positions("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/",
colnames = potgrowth::qc_parties)
template <- readODS::read_ods("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/template.ods")
### invert some scales for interpretability
vars_to_reverse <- c("iss_laic_secularismEncouraged",
"iss_laic_relSignsWorkNo",
"iss_laic_relSignsTeachersNo",
"iss_immig_immNoBenefit",
"iss_immig_immLess",
"iss_newleft_wokeObjReal",
"iss_newleft_wokeArtists")
for (i in vars_to_reverse) {
data$position[data$VARIABLE == i] <- 1 - data$position[data$VARIABLE == i]
label0 <- template$`LABEL 0`[template$VARIABLE == i]
label1 <- template$`LABEL 1`[template$VARIABLE == i]
template$`LABEL 0`[template$VARIABLE == i] <- label1
template$`LABEL 1`[template$VARIABLE == i] <- label0
}
data_graph <- left_join(data, template, by = "VARIABLE")
ggplot(data_graph, aes(x = position, y = graph_label))
data_graph$graph_label <- str_replace_all(data_graph$graph_label, "\\\\n", "\n")
data_graph$graph_label <- string::str_replace_all(data_graph$graph_label, "\\\\n", "\n")
data_graph <- left_join(data, template, by = "VARIABLE")
data_graph$graph_label <- stringr::str_replace_all(data_graph$graph_label, "\\\\n", "\n")
ggplot(data_graph, aes(x = position, y = graph_label))
170/2
rep(1, 85)
data_graph$facet <- c(rep(1, 85), rep(2, 85))
ggplot(data_graph, aes(x = position, y = graph_label))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 0.3))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 0.3)) +
geom_point(position = position_dodge2(width = 0.2),
aes(group = party, color = party))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 0.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-1.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.7, 1.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party))
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party)) +
clessnverse::theme_clean_light()
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party)) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors)
ggplot(data_graph, aes(x = position, y = graph_label)) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors)
data_graph$order <- rep(1:length(unique(data_graph$graph_label)), each = 5)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = -0.3, hjust = 0, aes(label = `LABEL 0`))
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = -0.3, hjust = 0, aes(label = `LABEL 0`),
size = 2, color = "grey40")
# Packages ----------------------------------------------------------------
library(dplyr)
library(ggplot2)
# Data --------------------------------------------------------------------
data <- potgrowth::aggregate_party_positions("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/",
colnames = potgrowth::qc_parties)
template <- readODS::read_ods("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/template.ods")
### invert some scales for interpretability
vars_to_reverse <- c("iss_laic_secularismEncouraged",
"iss_laic_relSignsWorkNo",
"iss_laic_relSignsTeachersNo",
"iss_immig_immNoBenefit",
"iss_immig_immLess",
"iss_newleft_wokeObjReal",
"iss_newleft_wokeArtists")
for (i in vars_to_reverse) {
data$position[data$VARIABLE == i] <- 1 - data$position[data$VARIABLE == i]
label0 <- template$`LABEL 0`[template$VARIABLE == i]
label1 <- template$`LABEL 1`[template$VARIABLE == i]
template$`LABEL 0`[template$VARIABLE == i] <- label1
template$`LABEL 1`[template$VARIABLE == i] <- label0
}
data_graph <- left_join(data, template, by = "VARIABLE")
data_graph$graph_label <- stringr::str_replace_all(data_graph$graph_label, "\\\\n", "\n")
data_graph$`LABEL 0` <- stringr::str_replace_all(data_graph$`LABEL 0`, "\\\\n", "\n")
data_graph$`LABEL 1` <- stringr::str_replace_all(data_graph$`LABEL 1`, "\\\\n", "\n")
data_graph$order <- rep(1:length(unique(data_graph$graph_label)), each = 5)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = 0, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40")
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = 0, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40") +
geom_text(x = 1, hjust = 0, aes(label = `LABEL 1`),
size = 2, color = "grey40")
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 9, height = 25)
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 12, height = 20)
# Data --------------------------------------------------------------------
data <- potgrowth::aggregate_party_positions("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/",
colnames = potgrowth::qc_parties)
template <- readODS::read_ods("_SharedFolder_memoire-pot-growth/data/warehouse/party_positions/expert_surveys/template.ods")
### invert some scales for interpretability
vars_to_reverse <- c("iss_laic_secularismEncouraged",
"iss_laic_relSignsWorkNo",
"iss_laic_relSignsTeachersNo",
"iss_immig_immNoBenefit",
"iss_immig_immLess",
"iss_newleft_wokeObjReal",
"iss_newleft_wokeArtists")
for (i in vars_to_reverse) {
data$position[data$VARIABLE == i] <- 1 - data$position[data$VARIABLE == i]
label0 <- template$`LABEL 0`[template$VARIABLE == i]
label1 <- template$`LABEL 1`[template$VARIABLE == i]
template$`LABEL 0`[template$VARIABLE == i] <- label1
template$`LABEL 1`[template$VARIABLE == i] <- label0
}
data_graph <- left_join(data, template, by = "VARIABLE")
data_graph$graph_label <- stringr::str_replace_all(data_graph$graph_label, "\\\\n", "\n")
data_graph$`LABEL 0` <- stringr::str_replace_all(data_graph$`LABEL 0`, "\\\\n", "\n")
data_graph$`LABEL 1` <- stringr::str_replace_all(data_graph$`LABEL 1`, "\\\\n", "\n")
data_graph$order <- rep(1:length(unique(data_graph$graph_label)), each = 5)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.8),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = 0, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40") +
geom_text(x = 1, hjust = 0, aes(label = `LABEL 1`),
size = 2, color = "grey40")
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 12, height = 20)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = 0, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40") +
geom_text(x = 1, hjust = 0, aes(label = `LABEL 1`),
size = 2, color = "grey40")
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 12, height = 20)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = 0.1, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40") +
geom_text(x = 1.1, hjust = 0, aes(label = `LABEL 1`),
size = 2, color = "grey40")
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 12, height = 20)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.3, 1.3)) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = -0.1, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40") +
geom_text(x = 1.1, hjust = 0, aes(label = `LABEL 1`),
size = 2, color = "grey40")
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 12, height = 20)
ggplot(data_graph, aes(x = position, y = reorder(graph_label, order))) +
scale_x_continuous(limits = c(-0.5, 1.5),
breaks = c()) +
geom_point(position = position_dodge2(width = 0.5),
aes(group = party, color = party),
size = 4, alpha = 0.6, stroke = NA,
show.legend = FALSE) +
clessnverse::theme_clean_light() +
scale_color_manual(values = potgrowth::qc_party_colors) +
xlab("") + ylab("") +
geom_text(x = -0.1, hjust = 1, aes(label = `LABEL 0`),
size = 2, color = "grey40") +
geom_text(x = 1.1, hjust = 0, aes(label = `LABEL 1`),
size = 2, color = "grey40")
ggsave("_SharedFolder_memoire-pot-growth/graphs/explo/clessn_predict_party_positions.png",
width = 12, height = 20)
# Packages ----------------------------------------------------------------
library(dplyr)
Data <- readRDS("_SharedFolder_memoire-pot-growth/data/warehouse/survey_data/withgaps.rds")
scales <- names(Data %>% select(starts_with("scale_"), -scale_leftRight))
ses <- c("granular", "age_cat", "educ", "income", "male", "lang")
scale <- scales[1]
model_data <- Data %>%
select(all_of(scale),
c("granular", "age_cat", "educ", "income", "male", "lang"))
formula <- as.formula(paste0(scale, " ~ ."))
model <- lm(formula = formula,
data = model_data)
summary(model)
summary(model)
devtools::install_github("hubcad25/potgrowth")
# Packages ----------------------------------------------------------------
library(dplyr)
Data <- readRDS("_SharedFolder_memoire-pot-growth/data/warehouse/survey_data/withgaps.rds")
scales <- names(Data %>% select(starts_with("scale_"), -scale_leftRight))
ses <- c("granular", "age_cat", "educ", "income", "male", "lang")
Data <- readRDS("_SharedFolder_memoire-pot-growth/data/warehouse/survey_data/withgaps.rds")
scales <- names(Data %>% select(starts_with("scale_"), -scale_leftRight))
ses <- c("granular", "age_cat", "educ", "income", "male", "lang")
for (i in scales){
model <- potgrowth::iv_model(
data = Data,
iv_to_predict = i,
ses = ses)
saveRDS(model,
paste0("_SharedFolder_memoire-pot-growth/data/marts/models/attitude_models/scales_models/", i, ".rds"))
message(i)
}
summary(model)
summary(model)
